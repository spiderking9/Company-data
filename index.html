<!doctype html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Gliwice </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel=stylesheet type=text/css href=mystyle.css />
</head>

<body>
    <table>
        <tr>
            <th>id</th>
            <th>name</th>
            <th>city</th>
            <th>total income</th>
            <th>average income</th>
            <th>last month income</th>
        </tr>
        <tr id='data'>
        </tr>
    </table>
    <br />
    total income (sum of company incomes),
    average income (average of company incomes),
    last month income (sum of last month incomes)
    <script>
        var d = new Date().getMonth();
        fetch('https://recruitment.hal.skygate.io/companies').then(data => data.json()).then(response => {
            response.forEach(company => {
                var id = company.id;
                var name = company.name;
                var city = company.city;
                console.log(id + " " + name + " " + city);

                fetch('https://recruitment.hal.skygate.io/incomes/210').then(data => data.json()).then(response => {
                    var income = response.incomes.reduce(function(a, b) {
                        console.log(a);
                        return a + parseFloat(b.value);
                    }, 0);
                    console.log(income);
                    console.log(response.incomes[0].date.substring(5, 7));
                });
            })








            console.log(response[0].id);
        });

    </script>
</body>

</html>
